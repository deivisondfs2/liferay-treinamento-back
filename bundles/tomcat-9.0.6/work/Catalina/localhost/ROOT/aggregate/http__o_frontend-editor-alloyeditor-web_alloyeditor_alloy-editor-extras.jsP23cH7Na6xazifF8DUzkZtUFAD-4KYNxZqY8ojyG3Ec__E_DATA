/*1530634500000*/
!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/o/frontend-editor-alloyeditor-web/alloyeditor/",t(t.s=0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(1),a=n(o),r=i(2),l=n(r),s=i(3),d=n(s),u=i(4),c=n(u),h=i(5),m=n(h),f=i(6),p=n(f),g=i(7),v=n(g),y=i(8),E=n(y),b=i(9),w=n(b),x=i(10),A=n(x),C=i(11),k=n(C);i(12);var I=i(15),T=n(I),R=i(16),S=n(R);AlloyEditor.Buttons[a.default.key]=AlloyEditor.AccessibilityImageAlt=a.default,AlloyEditor.Buttons[c.default.key]=AlloyEditor.AlignImageCenter=c.default,AlloyEditor.Buttons[m.default.key]=AlloyEditor.AlignImageLeft=m.default,AlloyEditor.Buttons[p.default.key]=AlloyEditor.AlignImageRight=p.default,AlloyEditor.Buttons[l.default.key]=AlloyEditor.EmbedVideo=l.default,AlloyEditor.Buttons[d.default.key]=AlloyEditor.EmbedVideoEdit=d.default,AlloyEditor.Buttons[v.default.key]=AlloyEditor.ItemSelectorAudio=v.default,AlloyEditor.Buttons[E.default.key]=AlloyEditor.ItemSelectorImage=E.default,AlloyEditor.Buttons[w.default.key]=AlloyEditor.ItemSelectorVideo=w.default,AlloyEditor.Buttons[A.default.key]=AlloyEditor.LinkBrowse=A.default,AlloyEditor.Buttons[k.default.key]=AlloyEditor.LinkEditBrowse=k.default,AlloyEditor.SelectionTest=AlloyEditor.SelectionTest||{},AlloyEditor.SelectionTest.embedurl=T.default,AlloyEditor.SelectionTest.headingtext=S.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({mixins:[AlloyEditor.ButtonStateClasses,AlloyEditor.ButtonCfgProps],displayName:"AccessibilityImageAlt",propTypes:{editor:n.PropTypes.object.isRequired},statics:{key:"imageAlt"},getInitialState:function(){var e=this.props.editor.get("nativeEditor").getSelection().getSelectedElement();return{element:e,imageAlt:e?e.getAttribute("alt"):""}},render:function(){var e="ae-button "+this.getStateClasses();return this.props.renderExclusive?n.createElement("div",{className:"ae-container-edit-link"},n.createElement("div",{className:"ae-container-input xxl"},n.createElement("input",{"aria-label":"alt",className:"ae-input",onChange:this._handleAltChange,onKeyDown:this._handleKeyDown,placeholder:"alt",ref:"refAltInput",title:"alt",type:"text",value:this.state.imageAlt})),n.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",onClick:this._updateImageAlt,title:AlloyEditor.Strings.confirm},n.createElement("span",{className:"ae-icon-ok"}))):n.createElement("button",{className:e,onClick:this._requestExclusive,tabIndex:this.props.tabIndex},n.createElement("small",{className:"ae-icon small"},"Alt"))},_focusAltInput:function(){var e=this,t=function(){AlloyEditor.ReactDOM.findDOMNode(e.refs.refAltInput).focus()};window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)},_handleAltChange:function(e){this.setState({imageAlt:e.target.value}),this._focusAltInput()},_handleKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),this._updateImageAlt())},_requestExclusive:function(){this.props.requestExclusive(o.key)},_updateImageAlt:function(){var e=this.props.editor.get("nativeEditor"),t=this.refs.refAltInput.value;this.setState({imageAlt:t}),this.state.element.setAttribute("alt",t),e.fire("actionPerformed",this),this.props.cancelExclusive()}});t.default=o,t.AccessibilityImageAlt=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({displayName:"EmbedVideo",mixins:[AlloyEditor.ButtonCfgProps],propTypes:{editor:n.PropTypes.object.isRequired,label:n.PropTypes.string,tabIndex:n.PropTypes.number},statics:{key:"embedVideo"},render:function(){if(this.props.renderExclusive)return n.createElement(AlloyEditor.EmbedVideoEdit,this.props);var e=Liferay.Util.getLexiconIconTpl("video");return n.createElement("button",{className:"ae-button","data-type":"button-embed-video",onClick:this.props.requestExclusive,tabIndex:this.props.tabIndex,dangerouslySetInnerHTML:{__html:e}})}});t.default=o,t.EmbedVideo=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=AlloyEditor.ReactDOM,a='Paste\x20the\x20video\x20link\x2e\x2e\x2e',r=n.createClass({displayName:"EmbedVideoEdit",propTypes:{editor:n.PropTypes.object.isRequired},statics:{key:"embedVideoEdit"},componentDidMount:function(){(this.props.renderExclusive||this.props.manualSelection)&&(window.requestAnimationFrame?window.requestAnimationFrame(this._focusVideoUrlInput):setTimeout(this._focusVideoUrlInput,0))},componentWillReceiveProps:function(e){this.replaceState(this.getInitialState())},getInitialState:function(){var e,t=this.props.editor.get("nativeEditor"),i=t.getSelection();if(i){var n=i.getSelectedElement();n&&(e=n.findOne('[data-widget="videoembed"]'))}var o=e?e.getAttribute("data-embed-video-url"):"";return{element:e,initialEmbed:{videoURL:o},videoURL:o}},render:function(){var e={opacity:this.state.videoURL?1:0};return n.createElement("div",{className:"ae-container-embed-video-edit"},n.createElement("div",{className:"ae-container-input xxl"},n.createElement("input",{className:"ae-input",onChange:this._handleVideoURLChange,onKeyDown:this._handleKeyDown,placeholder:a,ref:"linkInput",type:"text",value:this.state.videoURL}),n.createElement("button",{"aria-label":AlloyEditor.Strings.clearInput,className:"ae-button ae-icon-remove",onClick:this._clearLink,style:e,title:AlloyEditor.Strings.clear})),n.createElement("button",{"aria-label":AlloyEditor.Strings.confirm,className:"ae-button",disabled:!this._isValidState(),onClick:this._embedVideoURL,title:AlloyEditor.Strings.confirm},n.createElement("span",{className:"ae-icon-ok"})))},_clearLink:function(){this.setState({videoURL:""})},_embedVideoURL:function(){this.props.editor.get("nativeEditor").execCommand("embedUrl",{type:"video",url:this.state.videoURL}),this.props.cancelExclusive()},_focusVideoUrlInput:function(){o.findDOMNode(this.refs.linkInput).focus()},_handleKeyDown:function(e){13!==e.keyCode&&27!==e.keyCode||e.preventDefault(),13===e.keyCode?this._embedVideoURL():27===e.keyCode&&this.props.cancelExclusive()},_handleVideoURLChange:function(e){this.setState({videoURL:e.target.value})},_isValidState:function(){return this.state.videoURL&&this.state.videoURL!==this.state.initialEmbed.videoURL}});t.default=r,t.EmbedVideoEdit=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=(AlloyEditor.ReactDOM,n.createClass({displayName:"AlignImageCenter",mixins:[AlloyEditor.ButtonStateClasses,AlloyEditor.ButtonCommand,AlloyEditor.ButtonCommandActive],propTypes:{editor:n.PropTypes.object.isRequired,label:n.PropTypes.string,tabIndex:n.PropTypes.number},statics:{key:"imageCenter"},getDefaultProps:function(){return{command:"justifycenter"}},render:function(){var e="ae-button "+this.getStateClasses();return n.createElement("button",{"aria-label":AlloyEditor.Strings.alignCenter,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-center",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignCenter},n.createElement("svg",{className:"lexicon-icon lexicon-icon-align-image-center",focusable:"false",role:"image"},n.createElement("use",{"data-href":themeDisplay.getPathThemeImages()+"/lexicon/icons.svg#align-image-center"}),n.createElement("title",null,"align-image-center")))}}));AlloyEditor.Buttons[o.key]=AlloyEditor.AlignImageCenter=o,t.default=o,t.AlignImageCenter=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=(AlloyEditor.ReactDOM,n.createClass({displayName:"AlignImageLeft",mixins:[AlloyEditor.ButtonStateClasses,AlloyEditor.ButtonCommand,AlloyEditor.ButtonCommandActive],propTypes:{editor:n.PropTypes.object.isRequired,label:n.PropTypes.string,tabIndex:n.PropTypes.number},statics:{key:"imageLeft"},getDefaultProps:function(){return{command:"justifyleft"}},render:function(){var e="ae-button "+this.getStateClasses();return n.createElement("button",{"aria-label":AlloyEditor.Strings.alignLeft,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-left",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignLeft},n.createElement("svg",{className:"lexicon-icon lexicon-icon-align-image-left",focusable:"false",role:"image"},n.createElement("use",{"data-href":themeDisplay.getPathThemeImages()+"/lexicon/icons.svg#align-image-left"}),n.createElement("title",null,"align-image-left")))}}));AlloyEditor.Buttons[o.key]=AlloyEditor.AlignImageLeft=o,t.default=o,t.AlignImageLeft=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=(AlloyEditor.ReactDOM,n.createClass({displayName:"AlignImageRight",mixins:[AlloyEditor.ButtonStateClasses,AlloyEditor.ButtonCommand,AlloyEditor.ButtonCommandActive],propTypes:{editor:n.PropTypes.object.isRequired,label:n.PropTypes.string,tabIndex:n.PropTypes.number},statics:{key:"imageRight"},getDefaultProps:function(){return{command:"justifyright"}},render:function(){var e="ae-button "+this.getStateClasses();return n.createElement("button",{"aria-label":AlloyEditor.Strings.alignRight,"aria-pressed":-1!==e.indexOf("pressed"),className:e,"data-type":"button-image-align-right",onClick:this.execCommand,tabIndex:this.props.tabIndex,title:AlloyEditor.Strings.alignRight},n.createElement("svg",{className:"lexicon-icon lexicon-icon-align-image-right",focusable:"false",role:"image"},n.createElement("use",{"data-href":themeDisplay.getPathThemeImages()+"/lexicon/icons.svg#align-image-right"}),n.createElement("title",null,"align-image-right")))}}));AlloyEditor.Buttons[o.key]=AlloyEditor.AlignImageRight=o,t.default=o,t.AlignImageRight=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({mixins:[AlloyEditor.ButtonCommand],displayName:"ItemSelectorAudio",propTypes:{editor:n.PropTypes.object.isRequired},getDefaultProps:function(){return{command:"audioselector"}},statics:{key:"audio"},render:function(){return n.createElement("button",{className:"ae-button","data-type":"button-audio",onClick:this._handleClick,tabIndex:this.props.tabIndex},n.createElement("span",{className:"ae-icon icon-headphones"},"Alt"))},_handleClick:function(){this.execCommand(null)}});t.default=o,t.ItemSelectorAudio=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({mixins:[AlloyEditor.ButtonCommand],displayName:"ItemSelectorImage",propTypes:{editor:n.PropTypes.object.isRequired,imageTPL:n.PropTypes.string},getDefaultProps:function(){return{command:"imageselector"}},statics:{key:"image"},render:function(){return n.createElement("button",{className:"ae-button","data-type":"button-image",onClick:this._handleClick,tabIndex:this.props.tabIndex},n.createElement("span",{className:"ae-icon-image"}))},_handleClick:function(){this.execCommand(null)}});t.default=o,t.ItemSelectorImage=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({mixins:[AlloyEditor.ButtonCommand],displayName:"ItemSelectorVideo",propTypes:{editor:n.PropTypes.object.isRequired},getDefaultProps:function(){return{command:"videoselector"}},statics:{key:"video"},render:function(){return n.createElement("button",{className:"ae-button","data-type":"button-video",onClick:this._handleClick,tabIndex:this.props.tabIndex},n.createElement("span",{className:"ae-icon icon-film"}))},_handleClick:function(){this.execCommand(null)}});t.default=o,t.ItemSelectorVideo=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=AlloyEditor.React,o=n.createClass({displayName:"LinkBrowse",mixins:[AlloyEditor.ButtonKeystroke,AlloyEditor.ButtonStateClasses,AlloyEditor.ButtonCfgProps],propTypes:{editor:n.PropTypes.object.isRequired,label:n.PropTypes.string,tabIndex:n.PropTypes.number},statics:{key:"linkBrowse"},getDefaultProps:function(){return{keystroke:{fn:"_requestExclusive",keys:CKEDITOR.CTRL+76}}},render:function(){return this.props.renderExclusive?(this.props=this.mergeButtonCfgProps(),n.createElement(AlloyEditor.LinkEditBrowse,this.props)):n.createElement(AlloyEditor.ButtonLink,this.props)},_requestExclusive:function(){this.props.requestExclusive(o.key)}});t.default=o,t.LinkBrowse=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=AlloyEditor.React,a=o.createClass({displayName:"FolderIconSvg",render:function(){return o.createElement("svg",{width:"19px",height:"16px",viewBox:"0 0 19 16",version:"1.1"},o.createElement("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},o.createElement("g",{id:"folder_icon","fill-rule":"nonzero",fill:"#FFFFFF"},o.createElement("path",{d:"M1.16154142e-20,3.2 L7.82504921e-20,13.8932647 C8.51581999e-20,15.0017792 0.890925393,15.9004077 1.99742191,15.9004077 L17.0025781,15.9004077 C18.1057238,15.9004077 19,15.0109745 19,13.8961809 L19,5.25591756 C19,4.14901366 18.1131578,3.24410791 16.9941243,3.2350902 C16.9941243,3.2350902 13.9000228,3.20635475 11.1841707,3.2 L5.55111512e-16,3.2 Z M0.00476820776,1.92 C0.0763137892,0.875650807 0.944078934,0.0525431571 2.00404495,0.0525431571 L6.37206813,0.0525431571 C7.69758986,0.0525431571 8.07530451,1.04873135 8.52730884,1.92 L0.00476820776,1.92 Z"}))))}}),r=o.createClass({displayName:"LinkEditBrowse",propTypes:{editor:o.PropTypes.object.isRequired},statics:{key:"linkEditBrowse"},getInitialState:function(){var e=new CKEDITOR.Link(this.props.editor.get("nativeEditor")).getFromSelection();return{element:e,linkHref:e?e.getAttribute("href"):""}},render:function(){return o.createElement("div",null,o.createElement(AlloyEditor.ButtonLinkEdit,n({ref:"linkEditButton"},this.props)),o.createElement("button",{"aria-label":"Browse",className:"ae-button",onClick:this._browseClick,title:"browse"},o.createElement(a,null)))},_browseClick:function(){var e=this,t=this.props.editor.get("nativeEditor"),i=t.config.documentBrowseLinkUrl,n=this.refs.linkEditButton.state.linkTarget;AUI().use("liferay-item-selector-dialog",function(o){new o.LiferayItemSelectorDialog({eventName:t.name+"selectDocument",on:{selectedItemChange:function(t){var i=t.newVal;i&&e._updateLink(i.value,n,i.title)}},title:'Select\x20Item',url:i}).open()})},_updateLink:function(e,t,i){var n=this.props.editor.get("nativeEditor"),o=new CKEDITOR.Link(n,{appendProtocol:!1}),a={target:t},r={advance:!0};e&&(n.plugins&&n.plugins.creole&&!i&&(e=location.origin+e),this.state.element?(a.href=e,o.update(a,this.state.element,r)):o.create(e,a,r),n.fire("actionPerformed",this))}});t.default=r,t.LinkEditBrowse=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(13),o=function(e){return e&&e.__esModule?e:{default:e}}(n);if(!CKEDITOR.plugins.get("embedurl")){var a=/^https?/;CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL='<div data-embed-url="{url}" class="embed-responsive embed-responsive-16by9">{content}<div class="embed-help-message">{helpMessageIcon}<span> {helpMessage}</span></div></div><br>';var r={CENTER:"center",LEFT:"left",RIGHT:"right"},l=[r.CENTER,r.LEFT,r.RIGHT],s=[{name:"display",value:"block"},{name:"margin-left",value:"auto"},{name:"margin-right",value:"auto"}],d=function(e){var t=e.getStyle("float");if(t&&"inherit"!==t&&"none"!==t||(t=e.getAttribute("align")),!t){t=s.every(function(t){var i=e.getStyle(t.name)===t.value;return!i&&t.vendorPrefixes&&(i=t.vendorPrefixes.some(function(i){return e.getStyle(i+t.name)===t.value})),i})?r.CENTER:null}return t},u=function(e,t){t===r.LEFT||t===r.RIGHT?(e.removeStyle("float"),t===d(e)&&e.removeAttribute("align")):t===r.CENTER&&s.forEach(function(t){e.removeStyle(t.name),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(i){return e.removeStyle(i+t.name)})})},c=function(e,t){u(e,d(e)),t===r.LEFT||t===r.RIGHT?e.setStyle("float",t):t===r.CENTER&&s.forEach(function(t){e.setStyle(t.name,t.value),t.vendorPrefixes&&t.vendorPrefixes.forEach(function(i){return e.setStyle(i+t.name,t.value)})})},h=function(e){var t={alignment:null,element:null},i=e.getSelection();if(i){var n=i.getSelectedElement();n&&n.getAttribute("data-cke-widget-wrapper")&&(t.alignment=d(n),t.element=n)}return t},m=function(e,t,i){var n=e.parentElement;if(n&&t>0&&i>0){var o=n.getBoundingClientRect(),a=t>=o.width?100:Math.floor(t/o.width*100),r="width:"+a+"%;";n.setAttribute("style",r);var l=n.querySelector('[data-widget="embedurl"]');if(l){var s=JSON.parse(l.getAttribute("data-styles"))||{};s.width=t+"px",s.height=i+"px",l.setAttribute("data-styles",JSON.stringify(s));var d=l.querySelector("iframe");d&&(d.setAttribute("width",t),d.setAttribute("height",i))}}},f=function(e){setTimeout(function(){var t=e.getSelection();if(t){var i=t.root.find("[data-cke-widget-wrapper]");if(i){var n=i.$;if(n.length>0){var o=new CKEDITOR.dom.element(n[n.length-1]),a=o.findOne("img"),r=o.findOne('[data-widget="embedurl"]');if(a&&r){var l=e.createRange();l.setStart(r,0),l.setEnd(a,1),t.selectRanges([l]),t.selectElement(o)}}}}},0)},p=null,g=null,v=null;CKEDITOR.plugins.add("embedurl",{requires:"widget",init:function(e){var t=new CKEDITOR.template(e.config.embedWidgetTpl||CKEDITOR.DEFAULT_LFR_EMBED_WIDGET_TPL),i=e.config.embedProviders||[];i=i.map(function(e){return{id:e.id,tpl:new CKEDITOR.template('<div data-embed-id="{embedId}">'+e.tpl+"</div>"),type:e.type,urlSchemes:e.urlSchemes.map(function(e){return new RegExp(e)})}});var n=function(e,i){return t.output({content:i,helpMessage:'Video\x20playback\x20is\x20disabled\x20during\x20edition\x20mode\x2e',helpMessageIcon:Liferay.Util.getLexiconIconTpl("info-circle"),url:e})},r=function(e,t){var i=!1;if("div"===e.name&&e.attributes["data-embed-url"])t.url=e.attributes["data-embed-url"],i=!0;else if("div"===e.name&&e.attributes["data-embed-id"]){var o=e.children[0];t.url=o.attributes.src;var a=n(t.url,e.getOuterHtml()),r=new CKEDITOR.htmlParser.fragment.fromHtml(a);i=r.children[0],i.attributes["data-styles"]=JSON.stringify(e.styles),i.removeClass("embed-responsive"),i.removeClass("embed-responsive-16by9"),e.replaceWith(i)}return i},l=function(t){e.fire("error",t),setTimeout(function(){e.getSelection().removeAllRanges(),e.focus(),v.hide()},0)};e.addCommand("embedUrl",{exec:function(e,t){var o=t.type,r=t.url,s=void 0;if(a.test(r)){if(i.filter(function(e){return!o||e.type===o}).some(function(e){var t=e.urlSchemes.find(function(e){return e.test(r)});if(t){var i=t.exec(r)[1];s=e.tpl.output({embedId:i})}return t})){e._selectEmbedWidget=r;var d=n(r,s);e.insertHtml(d)}else l('Sorry\x2c\x20this\x20platform\x20is\x20not\x20supported\x2e')}else l('Please\x20enter\x20a\x20valid\x20URL\x2e')}}),e.widgets.add("embedurl",{draggable:!1,mask:!0,requiredContent:"div[data-embed-url]",data:function(t){var i=this,n=JSON.parse(i.element.getAttribute("data-styles"));if(!n){var o=i.wrapper.findOne("iframe"),a=i.wrapper.$.getBoundingClientRect(),r=o.getAttribute("width");n={width:(r>=a.width?100:Math.round(r/a.width*100))+"%"}}i.wrapper.setAttribute("style",CKEDITOR.tools.writeCssText(n)),e._selectEmbedWidget===t.data.url&&f(e)},downcast:function(e){var t=e.children[0];return t.attributes.class="embed-responsive embed-responsive-16by9",t.attributes.style=CKEDITOR.tools.writeCssText(e.parent.styles),t},upcast:function(t,i){return(e.config.embedWidgetUpcastFn||r)(t,i)}}),window.addEventListener("resize",function(){v.hide(),f(e)},!1),e.on("selectionChange",function(t){var i=e.getSelection();if(i){var n=i.getSelectedElement();if(n){var o=n.findOne('[data-widget="embedurl"]');if(o){var a=new CKEDITOR.dom.window(window).getScrollPosition(),r=n.getClientRect();r.direction=CKEDITOR.SELECTION_BOTTOM_TO_TOP,r.left-=a.x,r.top+=a.y,e.fire("editorInteraction",{nativeEvent:{},selectionData:{element:o,region:r}})}var l=n.findOne("img.cke_widget_mask");l&&v.show(l.$)}else v.hide()}}),e.on("destroy",function(){var e=document.getElementById("ckimgrsz");e&&e.remove(),document.removeEventListener("mousedown",s)}),e.on("blur",function(){v.hide()}),e.filter.addElementCallback(function(e){if("data-embed-url"in e.attributes)return CKEDITOR.FILTER_SKIP_TREE});var s=function(t){var i=h(e);p=i.alignment,g=i.element,v.isHandle(t.target)&&v.initDrag(t)};v=new o.default(e,{onComplete:function(t,i,n){m(t,i,n),p&&g&&c(g,p),f(e)}}),document.addEventListener("mousedown",s,!1)},afterInit:function(e){l.forEach(function(t){var i=e.getCommand("justify"+t);i&&(i.on("exec",function(i){var n=e.getSelection().getSelectedElement();if(n&&n.getAttribute("data-cke-widget-wrapper")){if(n.findOne('[data-widget="embedurl"] [data-embed-id]')){d(n)===t?u(n,t):c(n,t),g=n,p=d(n);var o=n.findOne("img");o&&v.show(o.$),i.cancel();var a=new CKEDITOR.dom.elementPath(n);l.forEach(function(t){var i=e.getCommand("justify"+t);i&&i.refresh(e,a)})}}}),i.on("refresh",function(e){var i=e.data.path.lastElement;if(i&&i.getAttribute("data-cke-widget-wrapper")&&i.findOne("[data-widget] [data-embed-id]")){var n=d(i);e.sender.setState(n===t?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.cancel()}}))})}})}t.default=CKEDITOR.plugins.get("embedurl")},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Resizer=void 0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(14),r=function(e){return e&&e.__esModule?e:{default:e}}(a),l=["tl","tr","bl","br"],s={bl:function(e,t,i,n){d(e,-3+t,n.height-4+i)},br:function(e,t,i,n){d(e,n.width-4+t,n.height-4+i)},rm:function(e,t,i,n){d(e,n.width-4+t,Math.round(n.height/2)-3+i)},tl:function(e,t,i,n){d(e,t-3,i-3)},tr:function(e,t,i,n){d(e,n.width-4+t,-3+i)}},d=function(e,t,i){e.style.left=t+"px",e.style.top=i+"px"},u=function(e,t){var i=t.getBoundingClientRect();return{height:i.height,left:i.left+e.pageXOffset,top:i.top+e.pageYOffset,width:i.width}},c=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.cfg=i,this.editor=t,this.document=t.document?t.document.$:document,this.window=t.window?t.window.$:window,this.box=null,this.container=null,this.handles={},this.preview=null,this.previewBox=null,this.result=null,this.init()}return o(e,[{key:"init",value:function(){var e=this;this.container=this.document.createElement("div"),this.container.id="ckimgrsz",this.preview=this.document.createElement("span"),this.container.appendChild(this.preview),this.handles={},l.forEach(function(t,i){e.handles[t]=e.createHandle(t)});for(var t=Object.keys(this.handles),i=0;i<t.length;i++)this.container.appendChild(this.handles[t[i]])}},{key:"createHandle",value:function(e){var t=this.document.createElement("i");return t.classList.add(e),t}},{key:"isHandle",value:function(e){for(var t=Object.keys(this.handles),i=!1,n=0;n<t.length;n++)this.handles[t[n]]===e&&(i=!0);return i}},{key:"show",value:function(e){var t=this.editor.config.uiNode||document.body;this.el=e,this.box=u(this.window,this.el),d(this.container,this.box.left,this.box.top+t.scrollTop),t.appendChild(this.container),this.el.classList.add("ckimgrsz"),this.showHandles()}},{key:"hide",value:function(){for(var e=this.document.getElementsByClassName("ckimgrsz"),t=0;t<e.length;t++)e[t].classList.remove("ckimgrsz");this.hideHandles(),this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"initDrag",value:function(e){var t=this;if(0===e.button){var i=new r.default(this.window,this.document);i.onStart=function(){t.showPreview(),t.isDragging=!0,t.editor.getSelection().lock()},i.onDrag=function(){t.calculateSize(i);var e=t.editor.element.$.getBoundingClientRect();if(!(t.previewBox.width>=e.width)){t.updatePreview();var n=t.previewBox;t.updateHandles(n,n.left,n.top)}},i.onRelease=function(){t.hidePreview(),t.isDragging=!1,t.hide(),t.editor.getSelection().unlock(),t.editor.fire("saveSnapshot")},i.onComplete=function(){t.resizeComplete(),t.editor.fire("saveSnapshot")},i.start(e)}}},{key:"updateHandles",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object.keys(this.handles),o=0;o<n.length;o++)s[n[o]](this.handles[n[o]],t,i,e)}},{key:"showHandles",value:function(){this.updateHandles(this.box);for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="block"}},{key:"hideHandles",value:function(){for(var e=Object.keys(this.handles),t=0;t<e.length;t++)this.handles[e[t]].style.display="none"}},{key:"showPreview",value:function(){this.calculateSize(),this.updatePreview(),this.preview.style.display="block"}},{key:"updatePreview",value:function(){d(this.preview,this.previewBox.left,this.previewBox.top),this.preview.style.height=this.previewBox.height+"px",this.preview.style.width=this.previewBox.width+"px"}},{key:"hidePreview",value:function(){var e=u(this.window,this.preview);this.result={height:e.height,width:e.width},this.preview.style.display="none"}},{key:"calculateSize",value:function(e){if(this.previewBox={height:this.box.height,left:0,top:0,width:this.box.width},e){var t=e.target.className;if(t.indexOf("r")>=0&&(this.previewBox.width=Math.max(32,this.box.width+e.delta.x)),t.indexOf("b")>=0&&(this.previewBox.height=Math.max(32,this.box.height+e.delta.y)),t.indexOf("l")>=0&&(this.previewBox.width=Math.max(32,this.box.width-e.delta.x)),t.indexOf("t")>=0&&(this.previewBox.height=Math.max(32,this.box.height-e.delta.y)),t.indexOf("m")<0&&!e.keys.shift){var i=this.box.width/this.box.height;this.previewBox.width/this.previewBox.height>i?this.previewBox.height=Math.round(this.previewBox.width/i):this.previewBox.width=Math.round(this.previewBox.height*i)}t.indexOf("l")>=0&&(this.previewBox.left=this.box.width-this.previewBox.width),t.indexOf("t")>=0&&(this.previewBox.top=this.box.height-this.previewBox.height)}}},{key:"resizeComplete",value:function(){this.cfg.onComplete(this.el,this.result.width,this.result.height)}}]),e}();t.Resizer=c,t.default=c},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i){n(this,e),this.document=i,this.window=t,this.events={keydown:this.keydown.bind(this),mousemove:this.mousemove.bind(this),mouseup:this.mouseup.bind(this)}}return o(e,[{key:"start",value:function(e){e.preventDefault(),e.stopPropagation(),this.target=e.target,this.className=this.target.className,this.startPos={x:e.clientX,y:e.clientY},this.update(e),this.document.addEventListener("keydown",this.events.keydown,!1),this.document.addEventListener("mousemove",this.events.mousemove,!1),this.document.addEventListener("mouseup",this.events.mouseup,!1),this.document.body.classList.add("dragging-"+this.className),"function"==typeof this.onStart&&this.onStart()}},{key:"update",value:function(e){this.currentPos={x:e.clientX,y:e.clientY},this.delta={x:e.clientX-this.startPos.x,y:e.clientY-this.startPos.y},this.keys={alt:e.altKey,ctrl:e.ctrlKey,shift:e.shiftKey}}},{key:"mousemove",value:function(e){this.update(e),"function"==typeof this.onDrag&&this.onDrag(),0===e.which&&this.mouseup(e)}},{key:"keydown",value:function(e){27===e.keyCode&&this.release()}},{key:"mouseup",value:function(e){this.update(e),this.release(),"function"==typeof this.onComplete&&this.onComplete()}},{key:"release",value:function(){this.document.body.classList.remove("dragging-"+this.className),this.document.removeEventListener("keydown",this.events.keydown,!1),this.document.removeEventListener("mousemove",this.events.mousemove,!1),this.document.removeEventListener("mouseup",this.events.mouseup,!1),"function"==typeof this.onRelease&&this.onRelease()}}]),e}();t.DragEvent=a,t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.data.selectionData;return!(!t.element||"embedurl"!==t.element.getAttribute("data-widget"))};t.default=n,t.embedUrlSelectionTest=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=["h1","h2","h3","h4","h5","h6"],i=e.editor.get("nativeEditor"),n=e.data.selectionData,o=i.isSelectionEmpty();return!(n.element||!n.region||o||i.getSelection().getCommonAncestor().isReadOnly()||!i.elementPath().contains(t))};t.default=n,t.headingTextSelectionTest=n}]);